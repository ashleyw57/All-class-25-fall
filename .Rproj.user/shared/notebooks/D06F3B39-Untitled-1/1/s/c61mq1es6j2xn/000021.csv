"0","# 将 Y/N 标准化为 Yes/No，并设为有序因子"
"0","to_yesno_factor <- function(x) {"
"0","  x_chr <- as.character(x)"
"0","  out <- dplyr::case_when("
"0","    x_chr == ""Y"" ~ ""Yes"","
"0","    x_chr == ""N"" ~ ""No"","
"0","    TRUE         ~ NA_character_"
"0","  )"
"0","  factor(out, levels = c(""No"", ""Yes""))"
"0","}"
"0",""
"0","patient_tbl <- patient %>%"
"0","  mutate("
"0","    MRN            = as.character(MRN),"
"0","    DOB            = lubridate::mdy(DOB),"
"0","    race           = factor(race),"
"0","    ethnicity      = factor(ethnicity),"
"0","    financialclass = factor(financialclass),"
"0","    hypertension   = to_yesno_factor(hypertension),"
"0","    CHF            = to_yesno_factor(CHF),"
"0","    diabetes       = to_yesno_factor(diabetes)"
"0","  )"
"0",""
