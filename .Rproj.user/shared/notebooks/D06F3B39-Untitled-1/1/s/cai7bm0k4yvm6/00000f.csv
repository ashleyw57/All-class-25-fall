"0","# 确保是分类变量，table1 才会输出 n (%)"
"0","patient_clean_tbl1 <- patient_clean |>"
"0","  mutate("
"0","    race           = factor(race),"
"0","    ethnicity      = factor(ethnicity),"
"0","    financialclass = factor(financialclass),"
"0","    hypertension   = factor(hypertension, levels = c(""No"",""Yes"")),"
"0","    CHF            = factor(CHF,          levels = c(""No"",""Yes"")),"
"0","    diabetes       = factor(diabetes,     levels = c(""No"",""Yes""))"
"0","  )"
"0","patient_clean <- patient |>"
"0","  mutate("
"0","    MRN = as.character(MRN),"
"0","    DOB = lubridate::mdy(DOB),"
"0","    # 把 Y/N 映射到 Yes/No（不做 0/1 假设）"
"0","    across(c(hypertension, CHF, diabetes),"
"0","           ~ recode(as.character(.x),"
"0","                    ""Y"" = ""Yes"", ""N"" = ""No"","
"0","                    .default = NA_character_)),"
"0","    across(c(hypertension, CHF, diabetes),"
"0","           ~ factor(.x, levels = c(""No"",""Yes"")))"
"0","  )"
"0",""
"0","# 一张“合并”的基线表（counts & %）"
"0","table1("
"0","  ~ race + ethnicity + financialclass + hypertension + CHF + diabetes,"
"0","  data    = patient_clean_tbl1,"
"0","  overall = TRUE,"
"0","  caption = ""Table 1. Patient-level Counts and Percentages"""
"0",")"
