"0","# 保证 WBC 存在且是数值（有些导入为字符）"
"0","analytic <- analytic |>"
"0","  mutate(WBC = suppressWarnings(as.numeric(WBC)))"
"0",""
"0","# 创建并按逻辑顺序设为 factor（一步完成）"
"0","analytic <- analytic |>"
"0","  mutate("
"0","    WBC_cat = factor("
"0","      case_when("
"0","        is.na(WBC) ~ ""Not Taken"","
"0","        WBC < 3.2  ~ ""Low (<3.2)"","
"0","        WBC <= 9.8 ~ ""Normal (3.2–9.8)"","
"0","        WBC > 9.8  ~ ""High (>9.8)"""
"0","      ),"
"0","      levels = c(""Low (<3.2)"", ""Normal (3.2–9.8)"", ""High (>9.8)"", ""Not Taken"")"
"0","    )"
"0","  )"
